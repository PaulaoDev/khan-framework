!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("kjs",[],t):"object"==typeof exports?exports.kjs=t():e.kjs=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),a=r(u),s=n(2),c=r(s);window.PubSub=a.default,window.$kjsStore=function(e){return l._states=e,new Proxy(e,{get:function(e,t){if(e[t])return e[t]},set:function(e,t,n){return l._states=e,e[t]="function"==typeof n?function(){return n.bind(l._states)()}:n,window.PubSub.publish("attr-"+t,n),window.PubSub.publish("bind-"+t,n),!0}})};var l=function(){function e(){return i(this,e),this}return o(e,[{key:"setState",value:function(e,t){this.$store[e]=t}},{key:"normalize",value:function(e,t){var n=document.querySelector.bind(document),r=(document.querySelectorAll.bind(document),function(e){return c.default.clear(e,t)});Array.from(n(e).querySelectorAll("*")).map(function(e){return r(e)})}},{key:"emitProps",value:function(){var e=this;Object.keys(this.$store).map(function(t){var n=t,r=e.$store[t];window.PubSub.publish("attr-"+n,r),window.PubSub.publish("bind-"+n,r)})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#app",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.normalize(e,t),this.$store=window.$kjsStore(t),this.emitProps(),this.$store.id=Math.floor(1e4*Math.random()),this}},{key:"state",get:function(){return e._states}}]),e}();t.default=l,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.topics={}}return r(e,[{key:"on",value:function(e,t){this.topics[e]||(this.topics[e]={queue:[]});var n=this.topics[e].queue.push(t)-1;return function(e,t){var n={remove:function(){delete this.topics[e].queue[t]}};return Object.assign(this,n)}.bind(this)(e,n)}},{key:"publish",value:function(e,t){if(this.topics[e]&&this.topics[e].queue.length)for(var n=this.topics[e].queue,r=0,i=n.length;r<i;r++)"function"==typeof n[r]&&n[r](t||{})}}]),e}();t.default=new i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=r(a),c=function(){function e(){o(this,e)}return u(e,[{key:"attributes",value:function(e){var t=new Object(e.attributes),n={};return Object.keys(t).map(function(e){n[t[e].name]=t[e].value}),n}},{key:"dataExists",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=e.trim();var r=[];Object.keys(t).map(function(t){e.includes(t)&&(null!==n?r.push([n,t]):r.push(t))});return r}},{key:"interpolate",value:function(e){return s.default.render(e,kjs._states)}},{key:"interpolateAttr",value:function(e){var t=/\[\{\s?(.*)\s?\}\]/gim,n=e.replace(t,function(e,t){return Object.keys(kjs._states).map(function(e){t.includes("data."+e)||(t=t.replace(new RegExp(e,"gim"),"data."+e))}),"${"+t+"}"});return new Function("data","return `"+n+"`;")(kjs._states)}},{key:"clear",value:function(e,t){var n=e.cloneNode(!0),r=/<(.*?)>(.*?)<\/(.*?)>/g;n.innerHTML=n.innerHTML.replace(r,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[2];return n.innerText=n.innerText.replace(new RegExp(i,"gi"),""),""}),this.binds(n,t,e)}},{key:"binds",value:function(e,t,n){var r=this,o=function(e,t,o){window.PubSub.on("attr-"+e,function(r){var u=o.includes("[{")&&o.includes("}]")?this.interpolateAttr:this.interpolate;n.setAttribute(t,u(o,i({},e,r)))}.bind(r))},u=function(t){window.PubSub.on("bind-"+t,function(r){var o=e.innerText.includes("[{")&&e.innerText.includes("}]")?this.interpolateAttr:this.interpolate;n.innerText=o(e.innerText,i({},t,r))}.bind(r))},a=this.dataExists(e.innerText,t),s=this.attributes(e);Object.keys(s).map(function(e){var n=s[e],r=this.dataExists(n,t,e);Array.isArray(r)&&r.length>0&&r.map(function(e){return o(e[1],e[0],n)})}.bind(this)),a.map(function(e){u(e)})}}]),e}();t.default=new c,e.exports=t.default},function(e,t,n){var r,i,o;/*!
	 * mustache.js - Logic-less {{mustache}} templates with JavaScript
	 * http://github.com/janl/mustache.js
	 */
!function(n,u){"object"==typeof t&&t&&"string"!=typeof t.nodeName?u(t):(i=[t],r=u,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o)))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return v(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return b.call(e,t)}function u(e){return!o(y,e)}function a(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return w[e]})}function s(t,n){function i(){if(y&&!w)for(;b.length;)delete d[b.pop()];else b=[];y=!1,w=!1}function o(e){if("string"==typeof e&&(e=e.split(m,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),p=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var a,s,p,h=[],d=[],b=[],y=!1,w=!1;o(n||e.tags);for(var T,P,E,S,_,O,A=new f(t);!A.eos();){if(T=A.pos,E=A.scanUntil(a))for(var U=0,$=E.length;U<$;++U)S=E.charAt(U),u(S)?b.push(d.length):w=!0,d.push(["text",S,T,T+1]),T+=1,"\n"===S&&i();if(!A.scan(a))break;if(y=!0,P=A.scan(j)||"name",A.scan(g),"="===P?(E=A.scanUntil(k),A.scan(k),A.scanUntil(s)):"{"===P?(E=A.scanUntil(p),A.scan(x),A.scanUntil(s),P="&"):E=A.scanUntil(s),!A.scan(s))throw new Error("Unclosed tag at "+A.pos);if(_=[P,E,T,A.pos],d.push(_),"#"===P||"^"===P)h.push(_);else if("/"===P){if(O=h.pop(),!O)throw new Error('Unopened section "'+E+'" at '+T);if(O[1]!==E)throw new Error('Unclosed section "'+O[1]+'" at '+T)}else"name"===P||"{"===P||"&"===P?w=!0:"="===P&&o(E)}if(O=h.pop())throw new Error('Unclosed section "'+O[1]+'" at '+A.pos);return l(c(d))}function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function l(e){for(var t,n,r=[],i=r,o=[],u=0,a=e.length;u<a;++u)switch(t=e[u],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function f(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var d=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===d.call(e)},b=RegExp.prototype.test,y=/\S/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},g=/\s*/,m=/\s+/,k=/\s*=/,x=/\s*\}/,j=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,u,a=this,s=!1;a;){if(e.indexOf(".")>0)for(n=a.view,o=e.split("."),u=0;null!=n&&u<o.length;)u===o.length-1&&(s=i(n,o[u])),n=n[o[u++]];else n=a.view[e],s=i(a.view,e);if(s)break;a=a.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=s(e,t)),r},h.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof p?t:new p(t);return this.renderTokens(r,i,n,e)},h.prototype.renderTokens=function(e,t,n,r){for(var i,o,u,a="",s=0,c=e.length;s<c;++s)u=void 0,i=e[s],o=i[0],"#"===o?u=this.renderSection(i,t,n,r):"^"===o?u=this.renderInverted(i,t,n,r):">"===o?u=this.renderPartial(i,t,n,r):"&"===o?u=this.unescapedValue(i,t):"name"===o?u=this.escapedValue(i,t):"text"===o&&(u=this.rawValue(i)),void 0!==u&&(a+=u);return a},h.prototype.renderSection=function(e,n,r,i){function o(e){return u.render(e,n,r)}var u=this,a="",s=n.lookup(e[1]);if(s){if(v(s))for(var c=0,l=s.length;c<l;++c)a+=this.renderTokens(e[4],n.push(s[c]),r,i);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)a+=this.renderTokens(e[4],n.push(s),r,i);else if(t(s)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");s=s.call(n.view,i.slice(e[3],e[5]),o),null!=s&&(a+=s)}else a+=this.renderTokens(e[4],n,r,i);return a}},h.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||v(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},h.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},h.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var T=new h;return e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,r)},e.to_html=function(n,r,i,o){var u=e.render(n,r,i);return t(o)?void o(u):u},e.escape=a,e.Scanner=f,e.Context=p,e.Writer=h,e})}])});