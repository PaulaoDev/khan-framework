{"version":3,"sources":["webpack:///webpack/bootstrap dd44e084462483cfe9b2","webpack:///./vendor/app/app.js","webpack:///./vendor/app/modules/middleware.js","webpack:///./vendor/app/modules/router.js","webpack:///./vendor/app/modules/controller.js"],"names":["global","window","middleware","require","Router","$controller","$khan","self","$db_application","Map","name","fn","set","get","routeAwait","use","go","run","dispatch","callback","pathh","params","active","bind","Object","assign","Middleware","stack","next","module","exports","routes","any","route","includes","replace","push","path","not_found","document","body","innerHTML","uri","path_active","location","hash","slice","pathname","splited","str","split","length","args","router","filter","pattern","RegExp","match","Array","isArray","test","$broadcast","data","ctrl","update","Proxy","target","key","value","khanApp","db","last_render_buffer","create","$view","$event","view","querySelector","setAttribute","model","$ctrl","render","proxy","updateView","parse_template","code","controller","receive","keys","k","map","join","m","$d","computed","interpolates","Function","dataset","Math","floor","random","render_buffer","e"],"mappings":"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","file":"khan.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dd44e084462483cfe9b2","\"use strict\";\r\n\r\nconst global = window;\r\nconst middleware = require('./modules/middleware');\r\nconst Router = require('./modules/router');\r\nconst $controller = require('./modules/controller');\r\n\r\nglobal.$khan = class {\r\n\r\n\tconstructor(){\r\n\t\tconst self = this;\t\t\r\n\t\tthis.$db_application = new Map();\r\n\t\tthis.middleware = new middleware();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tset(name, fn){ this.$db_application.set(name, fn); }\r\n\r\n\tget(name){ this.$db_application.get(name); }\r\n\r\n\tuse(fn){ \r\n\t\tif(fn.name && fn.name === \"Router\"){\r\n\t\t\tthis.routeAwait = fn;\r\n\t\t}\r\n\t\tif(!fn.name && fn.name !== \"Router\"){\r\n\t\t\tthis.middleware.use(fn); \r\n\t\t}\r\n\t}\r\n\t\r\n\tget $controller(){\r\n\t    return $controller;\r\n\t}\r\n\r\n\tRouter(){\r\n\t\treturn Router;\r\n\t}\r\n\r\n\tlisten(){\r\n\t\tvar self = this;\r\n\t\tthis.middleware.go(function(){\r\n\t\t\tdelete this['go'];\r\n\t\t\tif(self.routeAwait){\r\n\t\t\t\tvar run = self.routeAwait.dispatch();\r\n\t\t\t\tvar [callback, pathh, params, active] = run;\r\n\t\t\t\tparams = params || [];\r\n\t\t\t\tcallback.bind(Object.assign({}, this, {\r\n\t\t\t\t\t\"pathname\": pathh,\r\n\t\t\t\t\t\"uri\": active\r\n\t\t\t\t}))(...params);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/app/app.js","class Middleware {\r\n  \r\n  use(fn) {\r\n    this.go = (stack => next => stack(fn.bind(this, next.bind(this))))(this.go);\r\n  }\r\n\r\n  go(next){ return next(); }\r\n\r\n}\r\n\r\nmodule.exports = Middleware;\n\n\n// WEBPACK FOOTER //\n// ./vendor/app/modules/middleware.js","let Router = {};\r\n\r\nRouter.routes = [];\r\n\r\nRouter.any = (route, fn) => {\r\n\tif(route.includes('{') && route.includes('}')){\r\n\t\troute = route.replace(/\\{(.*?)}/g, '(.*)');\r\n\t}else{\r\n\t\troute = route + '?';\r\n\t}\r\n\tRouter.routes.push({ path: route, callback: fn });\r\n};\r\n\r\nRouter.name = \"Router\";\t\r\n\r\nRouter.not_found = {\r\n\t\"path\": 'not_found',\r\n\t\"callback\": function(){ \r\n\t\tdocument.body.innerHTML += `<h1>Router: \"${this.uri}\" not found!!</h1>`;\r\n\t}\r\n};\r\n\r\nRouter.path_active = (location.hash) ? location.hash.slice(1) : location.pathname;\r\n\r\nRouter.dispatch = () => {\r\n\tlet splited = (str) => str.split('/').length;\r\n\tvar params = [],\r\n\t\targs = [];\r\n\tvar router = Router.routes.filter((route) => {\r\n\t\tvar pattern = new RegExp('^'+ route.path );\r\n\t\targs = Router.path_active.match(pattern);\r\n\t\tif(Array.isArray(args) && args !== null){\r\n\t\t\targs = args.slice(1);\r\n\t\t}\r\n\t\treturn pattern.test(Router.path_active)\r\n\t\t\t   && splited(route.path) == splited(Router.path_active);\r\n\t});\r\n\trouter = router.length > 0 ? router[0] : Router.not_found; \r\n\treturn [ router.callback, router.path, args, Router.path_active];\r\n};\r\n\r\nmodule.exports = Router;\n\n\n// WEBPACK FOOTER //\n// ./vendor/app/modules/router.js","window.$broadcast = (data = {}, ctrl) => {\r\n\treturn function(update = () => {}){\r\n\t\treturn new Proxy(data, {\r\n            get: (target, key) => (key in target) ? target[key] : null,\r\n            set: (target, key, value) => {\r\n              if(!target[\"$_updates\"]) target[\"$_updates\"] = true;\r\n              ctrl[key] = value;\r\n\t\t\t\t      target[key] = value;\r\n              update(target, key, value);\r\n            }\r\n    \t});\r\n    }\r\n};\r\n\r\nwindow.khanApp = {};\r\n\r\nkhanApp.db = {};\r\nkhanApp.last_render_buffer = {};\r\n\r\nkhanApp.create = function(){\r\n    return this;\r\n};\r\n\r\nkhanApp.$controller = function($view, $event){\r\n    if(!window['khan_controller']) window['khan_controller'] = {};\r\n    var view = document.querySelector(`[khan-controller=\"${$view}\"]`);\r\n    view.setAttribute('visibility', 'hidden');\r\n    if(view){\r\n        window['khan_controller'][$view] = {};\r\n        let model = window['khan_controller'][$view];\r\n        let $ctrl = \"window.khan_controller.\" + $view;\r\n        //$event.bind(proxy)(proxy);\r\n        $event.bind(new class {\r\n            render(){\r\n                model = Object.assign({render: () => {} }, model, this);\r\n                window['khan_controller'][$view] = model;\r\n                khanApp.render(`[khan-controller=\"${$view}\"]`, model, $ctrl);\r\n                let proxy = $broadcast(model, window['khan_controller'][$view])(khanApp.updateView(`[khan-controller=\"${$view}\"]`, $ctrl));\r\n                $event.bind(proxy)(proxy);\r\n            }\r\n        })();\r\n    }\r\n};\r\n\r\nkhanApp.parse_template = (code, data, controller) => {\r\n\r\n    let receive = Object.keys(data)\r\n                        .filter((k) => k !== \"render\")\r\n                        .map((k) => `\\\\$${k}`).join('|');\r\n    receive = new RegExp(receive, 'gim');\r\n\r\n    code = code.replace(receive, (match) => {\r\n        var m = match.replace('$', '');\r\n        if(data[m]){\r\n            var $d = controller + \".\" + m;\r\n            if(typeof data[m] === \"function\"){\r\n               if(!data.computed) data.computed = {};\r\n               data[\"computed\"][m] = data[m];\r\n               $d = `${controller}.computed.${m}`;\r\n            }\r\n            return $d;\r\n        }\r\n    }).replace(/\\{\\{/gim, '${').replace(/\\}\\}/gim, '}');\r\n\r\n    const interpolates = (code) => {\r\n        return   code.replace(new RegExp('&gt;', 'gim'), '>')\r\n                     .replace(new RegExp('&lt;', 'gim'), '<')\r\n                     .replace(new RegExp('\\\\<\\\\(', 'gim'), \"'\")\r\n                     .replace(new RegExp('\\\\)\\\\>', 'gim'), \"'\")\r\n                     .replace(new RegExp('\\\\<\\\\=\\\\(', 'gim'), \"+ '\")\r\n                     .replace(new RegExp('\\\\)\\\\=\\\\>', 'gim'), \"' +\");\r\n    };\r\n\r\n    code = interpolates(code);\r\n\r\n    return new Function('return `'+code+'`;');\r\n\r\n};\r\n\r\nkhanApp.data = (view, key = null, value = null) => {\r\n    if(value === null && key !== null) return view.dataset[key];\r\n    if(value !== null && key !== null) view.dataset[key] = value;\r\n};\r\n\r\nkhanApp.render = function(view, data, controller){\r\n    var code = 'false';\r\n    view = document.querySelector(view);\r\n    if(!khanApp.data(view, 'render')){\r\n        khanApp.data(view, 'render', Math.floor(Math.random() * 10000));\r\n    }\r\n    if(!khanApp.render_buffer) khanApp.render_buffer = {};\r\n    if(!khanApp.render_buffer[view.dataset['render']]){\r\n      khanApp.render_buffer[view.dataset['render']] = view.innerHTML;\r\n      code = khanApp.parse_template(\r\n                view.innerHTML, \r\n                data,\r\n                controller\r\n             );\r\n    }else{\r\n      code = khanApp.parse_template(\r\n                khanApp.render_buffer[view.dataset['render']], \r\n                data,\r\n                controller\r\n             );\r\n    }\r\n    \r\n    try{ view.innerHTML = code(); }catch(e){}\r\n\r\n};\r\n\r\nkhanApp.updateView = (view, controller) => {\r\n    // console.log('Update!!');\r\n\t  return function(data, key, value){\r\n        khanApp.render(view, data, controller);\r\n    };\r\n};\r\n\r\nmodule.exports = khanApp.create().$controller;\n\n\n// WEBPACK FOOTER //\n// ./vendor/app/modules/controller.js"],"sourceRoot":""}