!function(n){function t(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var e={};t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,e){"use strict";function r(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}function a(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function n(n,t){var e=[],r=!0,a=!1,o=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);r=!0);}catch(n){a=!0,o=n}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),u=window,c=e(1),l=e(2),f=e(3);console.log(f),u.$khan=function(){function n(){a(this,n);return this.$db_application=new Map,this.middleware=new c,this}return i(n,[{key:"set",value:function(n,t){this.$db_application.set(n,t)}},{key:"get",value:function(n){this.$db_application.get(n)}},{key:"use",value:function(n){n.name&&"Router"===n.name&&(this.routeAwait=n),n.name||"Router"===n.name||this.middleware.use(n)}},{key:"Router",value:function(){return l}},{key:"listen",value:function(){var n=this;this.middleware.go(function(){if(delete this.go,n.routeAwait){var t=n.routeAwait.dispatch(),e=o(t,4),a=e[0],i=e[1],u=e[2],c=e[3];u=u||[],a.bind(Object.assign({},this,{pathname:i,uri:c})).apply(void 0,r(u))}})}},{key:"$controller",get:function(){return f}}]),n}()},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=function(){function n(){r(this,n)}return a(n,[{key:"use",value:function(n){var t=this;this.go=function(e){return function(r){return e(n.bind(t,r.bind(t)))}}(this.go)}},{key:"go",value:function(n){return n()}}]),n}();n.exports=o},function(n,t,e){"use strict";var r={};r.routes=[],r.any=function(n,t){n.includes("{")&&n.includes("}")?n=n.replace(/\{(.*?)}/g,"(.*)"):n+="?",r.routes.push({path:n,callback:t})},r.name="Router",r.not_found={path:"not_found",callback:function(){document.body.innerHTML+='<h1>Router: "'+this.uri+'" not found!!</h1>'}},r.path_active=location.hash?location.hash.slice(1):location.pathname,r.dispatch=function(){var n=function(n){return n.split("/").length},t=[],e=r.routes.filter(function(e){var a=new RegExp("^"+e.path);return t=r.path_active.match(a),Array.isArray(t)&&null!==t&&(t=t.slice(1)),a.test(r.path_active)&&n(e.path)==n(r.path_active)});return e=e.length>0?e[0]:r.not_found,[e.callback,e.path,t,r.path_active]},n.exports=r},function(n,t,e){"use strict";window.$broadcast=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Proxy(n,{get:function(n,t){return t in n?n[t]:null},set:function(n,e,r){n[e]=r,t(n,e,r)}})}},window.khanApp={},khanApp.db={},khanApp.$controller=function(n,t){window.khan_controller||(window.khan_controller={});var e=document.querySelector('[khan-controller="'+n+'"]');if(e){window.khan_controller[n]={};var r=window.khan_controller[n],a="window.khan_controller."+n;window.khan_controller[n]=$broadcast(r)(khanApp.updateView(e,a)),t(window.khan_controller[n])}},khanApp.parse_template=function(n,t,e){var r=n;return r.match(/{{(.*?)}}/g).map(function(n){var a=n.replace("{{","").replace("}}","").trim();Object.keys(t).map(function(n){a.includes(n)&&(a=a.replace(new RegExp(n,"g"),e+"."+n))}),r=r.replace(n,"${"+a+"}")}),new Function("return `"+r+"`;")},khanApp.data=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e&&null!==t)return n.dataset[t];null!==e&&null!==t&&(n.dataset[t]=e)},khanApp.render=function(n,t,e){var r="false";khanApp.render_buffer||(khanApp.render_buffer={}),khanApp.data(n,"render")||khanApp.data(n,"render",Math.floor(1e4*Math.random())),khanApp.render_buffer[n.dataset.render]||(khanApp.render_buffer[n.dataset.render]=n.innerHTML),r=khanApp.parse_template(khanApp.render_buffer[n.dataset.render],t,e),n.innerHTML=r()},khanApp.updateView=function(n,t){return function(e,r,a){console.log("Update View !!"),khanApp.render(n,e,t)}},n.exports=khanApp.$controller}]);
//# sourceMappingURL=khan.min.js.map