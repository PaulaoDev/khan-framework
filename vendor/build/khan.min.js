!function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,n){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=window,c=t(1),l=t(2),p=t(3);u.$khan=function(){function e(){a(this,e);return this.$db_application=new Map,this.middleware=new c,this}return i(e,[{key:"set",value:function(e,n){this.$db_application.set(e,n)}},{key:"get",value:function(e){this.$db_application.get(e)}},{key:"use",value:function(e){e.name&&"Router"===e.name&&(this.routeAwait=e),e.name||"Router"===e.name||this.middleware.use(e)}},{key:"Router",value:function(){return l}},{key:"listen",value:function(){var e=this;this.middleware.go(function(){if(delete this.go,e.routeAwait){var n=e.routeAwait.dispatch(),t=o(n,4),a=t[0],i=t[1],u=t[2],c=t[3];u=u||[],a.bind(Object.assign({},this,{pathname:i,uri:c})).apply(void 0,r(u))}})}},{key:"$controller",get:function(){return p}}]),e}()},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(){r(this,e)}return a(e,[{key:"use",value:function(e){var n=this;this.go=function(t){return function(r){return t(e.bind(n,r.bind(n)))}}(this.go)}},{key:"go",value:function(e){return e()}}]),e}();e.exports=o},function(e,n,t){"use strict";var r={};r.routes=[],r.any=function(e,n){e.includes("{")&&e.includes("}")?e=e.replace(/\{(.*?)}/g,"(.*)"):e+="?",r.routes.push({path:e,callback:n})},r.name="Router",r.not_found={path:"not_found",callback:function(){document.body.innerHTML+='<h1>Router: "'+this.uri+'" not found!!</h1>'}},r.path_active=location.hash?location.hash.slice(1):location.pathname,r.dispatch=function(){var e=function(e){return e.split("/").length},n=[],t=r.routes.filter(function(t){var a=new RegExp("^"+t.path);return n=r.path_active.match(a),Array.isArray(n)&&null!==n&&(n=n.slice(1)),a.test(r.path_active)&&e(t.path)==e(r.path_active)});return t=t.length>0?t[0]:r.not_found,[t.callback,t.path,n,r.path_active]},e.exports=r},function(e,n,t){"use strict";window.$broadcast=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Proxy(e,{get:function(e,n){return n in e?e[n]:null},set:function(e,t,r){e.$_updates||(e.$_updates=!0),e[t]=r,n(e,t,r)}})}},window.khanApp={},khanApp.db={},khanApp.last_render_buffer={},khanApp.create=function(){return this},khanApp.$controller=function(e,n){window.khan_controller||(window.khan_controller={});var t=document.querySelector('[khan-controller="'+e+'"]');if(t.setAttribute("visibility","hidden"),t){window.khan_controller[e]={};var r=window.khan_controller[e],a="window.khan_controller."+e,o=$broadcast(r)(khanApp.updateView('[khan-controller="'+e+'"]',a));n.bind(o)(o)}},khanApp.parse_template=function(e,n,t){var r=e.replace(/\n/g,"").replace(/\s\s/g,""),a=r.match(/{{(.*?)}}/g).length;return function(e){return e.$_updates&&delete e.$_updates,e.computed&&delete e.computed,Object.keys(e).length}(n)>=a?(r.match(/{{(.*?)}}/g).map(function(e){var a=e.replace("{{","").replace("}}","").trim(),o="";Object.keys(n).map(function(e){if(o="$"+e,a.includes(o))if(o="\\"+o,"function"==typeof n[e]){if(n.computed||(n.computed={}),n.computed[e])return;n.computed[e]=n[e],a=a.replace(new RegExp(o,"g"),t+".computed['"+e+"']")}else a=a.replace(new RegExp(o,"g"),t+"."+e)}),r=a.includes(".computed[")?a.includes("(")||a.includes(")")?r.replace(e,"${"+a+"}"):r.replace(e,a+"(this)"):r.replace(e,"${"+a+"}")}),r=r.replace(new RegExp("&gt;","g"),">").replace(new RegExp("&lt;","g"),"<").replace(new RegExp("\\#\\(","g"),"'").replace(new RegExp("\\)\\#","g"),"'").replace(new RegExp("\\-\\>","g"),"+").replace(new RegExp("\\<\\-","g"),"+"),new Function("return `"+r+"`;")):function(){}},khanApp.data=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t&&null!==n)return e.dataset[n];null!==t&&null!==n&&(e.dataset[n]=t)},khanApp.render=function(e,n,t){var r="false";e=document.querySelector(e),khanApp.data(e,"render")||khanApp.data(e,"render",Math.floor(1e4*Math.random())),khanApp.render_buffer||(khanApp.render_buffer={}),khanApp.render_buffer[e.dataset.render]?r=khanApp.parse_template(khanApp.render_buffer[e.dataset.render],n,t):(khanApp.render_buffer[e.dataset.render]=e.innerHTML,r=khanApp.parse_template(e.innerHTML,n,t));try{e.setAttribute("visibility","visible");try{e.innerHTML=r()}catch(e){throw e}}catch(e){throw e}},khanApp.updateView=function(e,n){return function(t,r,a){khanApp.render(e,t,n)}},e.exports=khanApp.create().$controller}]);
//# sourceMappingURL=khan.min.js.map