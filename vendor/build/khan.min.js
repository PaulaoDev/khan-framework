!function(n){function e(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var t={};e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";function r(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}function a(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function n(n,e){var t=[],r=!0,a=!1,o=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);r=!0);}catch(n){a=!0,o=n}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=window,c=t(1),l=t(2),p=t(3);u.$khan=function(){function n(){a(this,n);return this.$db_application=new Map,this.middleware=new c,this}return i(n,[{key:"set",value:function(n,e){this.$db_application.set(n,e)}},{key:"get",value:function(n){this.$db_application.get(n)}},{key:"use",value:function(n){n.name&&"Router"===n.name&&(this.routeAwait=n),n.name||"Router"===n.name||this.middleware.use(n)}},{key:"Router",value:function(){return l}},{key:"listen",value:function(){var n=this;this.middleware.go(function(){if(delete this.go,n.routeAwait){var e=n.routeAwait.dispatch(),t=o(e,4),a=t[0],i=t[1],u=t[2],c=t[3];u=u||[],a.bind(Object.assign({},this,{pathname:i,uri:c})).apply(void 0,r(u))}})}},{key:"$controller",get:function(){return p}}]),n}()},function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=function(){function n(){r(this,n)}return a(n,[{key:"use",value:function(n){var e=this;this.go=function(t){return function(r){return t(n.bind(e,r.bind(e)))}}(this.go)}},{key:"go",value:function(n){return n()}}]),n}();n.exports=o},function(n,e,t){"use strict";var r={};r.routes=[],r.any=function(n,e){n.includes("{")&&n.includes("}")?n=n.replace(/\{(.*?)}/g,"(.*)"):n+="?",r.routes.push({path:n,callback:e})},r.name="Router",r.not_found={path:"not_found",callback:function(){document.body.innerHTML+='<h1>Router: "'+this.uri+'" not found!!</h1>'}},r.path_active=location.hash?location.hash.slice(1):location.pathname,r.dispatch=function(){var n=function(n){return n.split("/").length},e=[],t=r.routes.filter(function(t){var a=new RegExp("^"+t.path);return e=r.path_active.match(a),Array.isArray(e)&&null!==e&&(e=e.slice(1)),a.test(r.path_active)&&n(t.path)==n(r.path_active)});return t=t.length>0?t[0]:r.not_found,[t.callback,t.path,e,r.path_active]},n.exports=r},function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();String.prototype.splice=function(n,e,t){return this.slice(0,n)+t+this.slice(n+Math.abs(e))},window.$broadcast=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Proxy(n,{get:function(n,e){return e in n?n[e]:null},set:function(n,r,a){n.$_updates||(n.$_updates=!0),e[r]=a,n[r]=a,t(n,r,a)}})}},window.khanApp={},khanApp.db={},khanApp.last_render_buffer={},khanApp.create=function(){return this},khanApp.$controller=function(n,e){window.khan_controller||(window.khan_controller={});var t=document.querySelector('[khan-controller="'+n+'"]');if(t){window.khan_controller[n]={};var o=window.khan_controller[n],i="window.khan_controller."+n;e.bind(new(function(){function u(){r(this,u)}return a(u,[{key:"render",value:function(){o=Object.assign({render:function(){},$view:t},o,this),window.khan_controller[n]=o,khanApp.render('[khan-controller="'+n+'"]',o,i);var r=$broadcast(o,window.khan_controller[n])(khanApp.updateView('[khan-controller="'+n+'"]',i));e.bind(r)(r)}}]),u}()))();var u=new MutationObserver(function(e){e.forEach(function(e){if(/\{\{(.*?)\}\}/gim.test(t.innerHTML)){var r=khanApp.last_render_buffer[t.dataset.render],a=t.innerHTML.replace(r,"");/\{\{(.*?)\}\}/gim.test(a)&&(khanApp.render_buffer[t.dataset.render]+=a,khanApp.updateView('[khan-controller="'+n+'"]',i)(o))}})}),c={attributes:!0,childList:!0,characterData:!0};u.observe(t,c)}},khanApp.parse_template=function(n,e,t){var r=Object.keys(e).filter(function(n){return"render"!==n}).map(function(n){return"\\$"+n}).join("|");r=new RegExp(r,"gim"),n=n.replace(r,function(n){var r=n.replace("$","");if(e[r]){var a=t+"."+r;return"function"==typeof e[r]&&(e.computed||(e.computed={}),e.computed[r]=e[r],a=t+".computed."+r),a}}).replace(/\{\{/gim,"${").replace(/\}\}/gim,"}");return n=function(n){return n.replace(new RegExp("&gt;","gim"),">").replace(new RegExp("&lt;","gim"),"<").replace(new RegExp("\\<\\(","gim"),"'").replace(new RegExp("\\)\\>","gim"),"'").replace(new RegExp("\\<\\=\\(","gim"),"+ '").replace(new RegExp("\\)\\=\\>","gim"),"' +")}(n),new Function("return `"+n+"`;")},khanApp.data=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t&&null!==e)return n.dataset[e];null!==t&&null!==e&&(n.dataset[e]=t)},khanApp.render=function(n,e,t){var r="false";n=document.querySelector(n),khanApp.data(n,"render")||khanApp.data(n,"render",Math.floor(1e4*Math.random())),khanApp.render_buffer||(khanApp.render_buffer={}),khanApp.render_buffer[n.dataset.render]?r=khanApp.parse_template(khanApp.render_buffer[n.dataset.render],e,t):(khanApp.render_buffer[n.dataset.render]=n.innerHTML,r=khanApp.parse_template(n.innerHTML,e,t));try{n.innerHTML=r(),khanApp.last_render_buffer[n.dataset.render]=r()}catch(n){}},khanApp.updateView=function(n,e){return function(t,r,a){khanApp.render(n,t,e)}},n.exports=khanApp.create().$controller}]);
//# sourceMappingURL=khan.min.js.map